/*******************************************************************************
 * Educational Online Test Delivery System
 * Copyright (c) 2013 American Institutes for Research
 * 
 * Distributed under the AIR Open Source License, Version 1.0
 * See accompanying file AIR-License-1_0.txt or at
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/
package org.opentestsystem.delivery.testadmin.domain;

import org.joda.time.DateTime;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;

@JsonIgnoreProperties(ignoreUnknown = true)
public class ParticipationDetailReport implements TestAdminReport {

    private static final long serialVersionUID = 1228073155461859831L;

    private static final DateTimeFormatter dateFormat = DateTimeFormat.forPattern("yyyy-MM-dd");

    private static final DateTimeFormatter timeFormat = DateTimeFormat.forPattern("HH:mm:ss");

    public static final String PARTICIPATE_REPORT_SUMMARY = "PARTICIPATE_REPORT_SUMMARY";

    private String lastName;
    private String firstName;
    private String middleName;
    private String ssId;
    private String testName;
    private String testLabel;
    private String opportunity;
    private Status testStatus;
    private DateTime started;
    private DateTime completed;

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getMiddleName() {
        return middleName;
    }

    public void setMiddleName(String middleName) {
        this.middleName = middleName;
    }

    public String getSsId() {
        return ssId;
    }

    public void setSsId(String ssId) {
        this.ssId = ssId;
    }

    public String getTestName() {
        return testName;
    }

    public void setTestName(String testName) {
        this.testName = testName;
    }

    public String getTestLabel() {
        return testLabel;
    }

    public void setTestLabel(String testLabel) {
        this.testLabel = testLabel;
    }

    public String getOpportunity() {
        return opportunity;
    }

    public void setOpportunity(String opportunity) {
        this.opportunity = opportunity;
    }

    public String getStatus() {
        return testStatus.getValue();
    }

    public Status getTestStatus() {
        return testStatus;
    }

    public void setTestStatus(Status testStatus) {
        this.testStatus = testStatus;
    }

    public DateTime getStarted() {
        return started;
    }

    public void setStarted(DateTime started) {
        this.started = started;
    }

    public DateTime getCompleted() {
        return completed;
    }

    public void setCompleted(DateTime completed) {
        this.completed = completed;
    }

    private String formatDate() {
        switch (getTestStatus()) {
        case COMPLETED:
            return dateFormat.print(getCompleted());
        case STARTED:
            return dateFormat.print(getStarted());
        default:
            return "";
        }
    }

    private String formatTime() {
        switch (getTestStatus()) {
        case COMPLETED:
            return timeFormat.print(getCompleted());
        case STARTED:
            return timeFormat.print(getStarted());
        default:
            return "";
        }
    }

    public String[] toStringArray() {
        String[] elements = new String[10];
        elements[0] = this.getLastName();
        elements[1] = this.getFirstName();
        elements[2] = this.getMiddleName();
        elements[3] = this.getSsId();
        elements[4] = this.getTestName();
        elements[5] = this.getTestLabel();
        elements[6] = this.getOpportunity();
        elements[7] = this.getStatus();
        elements[8] = this.formatDate();
        elements[9] = this.formatTime();
        return elements;

    }

}
