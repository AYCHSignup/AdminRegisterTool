/*******************************************************************************
 * Educational Online Test Delivery System
 * Copyright (c) 2013 American Institutes for Research
 * 
 * Distributed under the AIR Open Source License, Version 1.0
 * See accompanying file AIR-License-1_0.txt or at
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/
package org.opentestsystem.delivery.testadmin.domain;

import javax.validation.constraints.NotNull;

import org.hibernate.validator.constraints.NotBlank;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;

@JsonIgnoreProperties(ignoreUnknown = true)
public class Affinity {

    private AffinityRule rule;

    @NotBlank(message = "{affinity.value.blank}")
    private String value;

    @NotNull(message = "{affinity.type.blank}")
    private AffinityType type;

    public Affinity() {
        super();
        this.rule = AffinityRule.NONSTRICT;
    }

    public Affinity(AffinityRule rule, String value, AffinityType type) {
        super();
        this.rule = rule;
        this.value = value;
        this.type = type;
    }

    public AffinityRule getRule() {
        return rule;
    }

    public void setRule(AffinityRule rule) {
        this.rule = rule;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

    @JsonIgnore
    public boolean isStrict() {
        if (this.rule == AffinityRule.STRICT) {
            return true;
        }
        return false;
    }

    public AffinityType getType() {
        return type;
    }

    public void setType(AffinityType type) {
        this.type = type;
    }

    public enum AffinityRule {
        STRICT("Strict"),

        NONSTRICT("Non-Strict");

        private String name;

        private AffinityRule(String name) {
            this.name = name;
        }

        public String toString() {
            return name;
        }
    }

    public enum AffinityType {
        ASSESSMENT, SUBJECT, GRADE, STUDENTGROUP;
    }

}
