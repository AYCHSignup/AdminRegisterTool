/*******************************************************************************
 * Educational Online Test Delivery System
 * Copyright (c) 2013 American Institutes for Research
 * 
 * Distributed under the AIR Open Source License, Version 1.0
 * See accompanying file AIR-License-1_0.txt or at
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/

package org.opentestsystem.delivery.testreg.domain.constraintvalidators;

import org.junit.Before;
import org.junit.Test;
import org.opentestsystem.delivery.testreg.domain.Student;

import javax.validation.ConstraintValidatorContext;

import static org.hamcrest.core.Is.is;
import static org.junit.Assert.assertThat;
import static org.opentestsystem.delivery.testreg.domain.constraintvalidators.ValidatorContextHelper.getContextStub;

public class StudentOriginValidatorTest {
    
    Student student;
    
    StudentOriginValidator studentOriginValidator;
    ConstraintValidatorContext contextStub;
    
    @Before
    public void setup() {
        student = new Student();
        studentOriginValidator = new StudentOriginValidator();
        contextStub = null;
    }
    
    
    @Test
    public void testStudentOriginSuccess_AmericanIndian() {
        student.setAmericanIndianOrAlaskaNative("YES");
        
        assertThat(studentOriginValidator.isValid(student, contextStub), is(true));
    }
    
    @Test
    public void testStudentOriginSuccess_Asian() {
        student.setAsian("YES");
        
        assertThat(studentOriginValidator.isValid(student, contextStub), is(true));
    }
    
    
    @Test
    public void testStudentOriginSuccess_BlackorHispanic() {
        student.setBlackOrAfricanAmerican("YES");
        
        assertThat(studentOriginValidator.isValid(student, contextStub), is(true));
    }

        
    @Test
    public void testStudentOriginSuccess_HispanicOrLatino() {
        student.setHispanicOrLatino("YES");
        
        assertThat(studentOriginValidator.isValid(student, contextStub), is(true));
    }

    
    @Test
    public void testStudentOriginSuccess_NativeOrHawaiianOrPacificIsland() {
        student.setNativeHawaiianOrPacificIsland("YES");
        
        assertThat(studentOriginValidator.isValid(student, contextStub), is(true));
    }

    @Test
    public void testStudentOriginSuccess_White() {
        student.setWhite("YES");
        
        assertThat(studentOriginValidator.isValid(student, contextStub), is(true));
    }

    
    @Test
    public void testStudentOriginSuccess_TwoorMoreRaces() {
        student.setTwoOrMoreRaces("YES");
        
        assertThat(studentOriginValidator.isValid(student, contextStub), is(true));
    }
    
    /**
     * This test uses stub for {@code ConstraintValidatorContext} instead of {@code Validator}
     * to run the validation. The reason for that is the intention of this test is to exercise 
     * a single class level validation as suppose to all the fields in the class.
     */
    @Test
    public void testStudentOriginfailure() {
        assertThat(studentOriginValidator.isValid(student, getContextStub()), is(true));
        
        //set all Student Origin fields to No
        student.setAmericanIndianOrAlaskaNative("No");
        student.setAsian("No");
        student.setBlackOrAfricanAmerican("No");
        student.setHispanicOrLatino("No");
        student.setNativeHawaiianOrPacificIsland("No");
        student.setWhite("No");
        student.setTwoOrMoreRaces("No");
        assertThat(studentOriginValidator.isValid(student, getContextStub()), is(true));
    }
    
}
