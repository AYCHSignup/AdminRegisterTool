/*******************************************************************************
 * Educational Online Test Delivery System
 * Copyright (c) 2013 American Institutes for Research
 * 
 * Distributed under the AIR Open Source License, Version 1.0
 * See accompanying file AIR-License-1_0.txt or at
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/

package org.opentestsystem.delivery.testreg.rest.view;

import javax.annotation.Resource;

import org.opentestsystem.delivery.testreg.domain.Sb11Entity;
import org.opentestsystem.delivery.testreg.domain.Sb11NonEntity;
import org.opentestsystem.delivery.testreg.domain.TestRegistrationBase;
import org.springframework.stereotype.Component;

@Component
public class TestRegistrationViewTransformer implements Transformer<TestRegistrationBase, String[]> {
    
    @Resource(name="sb11EntityExportTransformer")
    private Transformer<Sb11Entity, String[]> sb11EntityExportTransformer;
    
    @Resource(name="sb11NonEntityExportTransformer")
    private Transformer<Sb11NonEntity, String[]> sb11NonEntityExportTransformer;

    @Override
    public String[] transform(TestRegistrationBase input) {
        switch(input.getFormatType()){
            case CLIENT:
            case STATE:
            case DISTRICT:
            case INSTITUTION:
            case GROUPOFSTATES:
            case GROUPOFDISTRICTS:
            case GROUPOFINSTITUTIONS:
                return sb11EntityExportTransformer.transform(Sb11Entity.class.cast(input));
            case ACCOMMODATIONS:
            case ASSESSMENT:
            case EXPLICITELIGIBILITY:
            case STUDENT:
            case STUDENTGROUP:
            case USER:
                return sb11NonEntityExportTransformer.transform(Sb11NonEntity.class.cast(input));          
            default:
                throw new RuntimeException("There is an issue looking up View Transformer");            
        }
    }

}
