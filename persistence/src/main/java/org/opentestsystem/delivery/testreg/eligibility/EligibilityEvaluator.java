/*
Educational Online Test Delivery System Copyright (c) 2013 American Institutes for Research

Distributed under the AIR Open Source License, Version 1.0 See accompanying file AIR-License-1_0.txt or at
http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 */

package org.opentestsystem.delivery.testreg.eligibility;

import org.opentestsystem.delivery.testreg.domain.Assessment;
import org.opentestsystem.delivery.testreg.domain.Student;
import org.opentestsystem.delivery.testreg.domain.event.AssessmentModificationEvent;
import org.opentestsystem.delivery.testreg.domain.event.BatchStudentModificationEvent;
import org.opentestsystem.delivery.testreg.domain.event.ExplicitEligibilityModificationEvent;
import org.opentestsystem.delivery.testreg.domain.event.StudentModificationEvent;

public interface EligibilityEvaluator {

    /**
     * Evaluate ImplicitEligibilityRules.
     * Only supports an '=' operator and multiple rules are 'AND'ed together by default.
     * 
     * @param assessment
     * @param student
     */
    void evaluateImplicitRules(Assessment assessment, Student student);

    void evaluateAssessmentModification(AssessmentModificationEvent event);

    void evaluateStudentModification(StudentModificationEvent event);

    void evaluateBatchStudentModification(BatchStudentModificationEvent event);

    void evaluateExplicitEligibilityModification(ExplicitEligibilityModificationEvent event);

    /**
     * Used as a hook to recalculate all eligibility in the case eligibility gets corrupted which can occur if things
     * are removed or modified in the db without going through the UI.
     * WARNING!!!! This could take a very long time to run
     */
    void recalculateAllEligibility();
}