package org.opentestsystem.delivery.testreg.service.impl;

import org.opentestsystem.delivery.testreg.domain.StudentBatchStatus;
import org.opentestsystem.delivery.testreg.persistence.batch.StudentBatchStatusRepository;
import org.opentestsystem.delivery.testreg.service.StudentBatchStatusService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.ArrayList;

/**
 * Created by fairway on 7/11/16.
 */
@Service
public class StudentBatchStatusServiceImpl implements StudentBatchStatusService {

    @Autowired
    private StudentBatchStatusRepository studentBatchStatusRepository;

    public StudentBatchStatus getStudentBatchStatus(String batchId) {
        return studentBatchStatusRepository.findById(batchId);
    }

    @Override
    public void addStudentBatchError(String batchId, String errorMessage) {

    }

    @Override
    public void incrementStudentBatchSuccess(String batchId) {

    }

    public String createStudentBatchStatus(int numberSubmitted, boolean isUpsert) {
        StudentBatchStatus studentBatchStatus = new StudentBatchStatus();
        studentBatchStatus.setUpsert(isUpsert);
        studentBatchStatus.setNumSubmitted(numberSubmitted);
        studentBatchStatus.setExceptions(new ArrayList<String>());
        return studentBatchStatusRepository.create(studentBatchStatus);
    }
}
